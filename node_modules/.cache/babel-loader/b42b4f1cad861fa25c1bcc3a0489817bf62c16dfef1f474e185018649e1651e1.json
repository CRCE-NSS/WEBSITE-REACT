{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/DELL/WEBSITE-REACT/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/DELL/WEBSITE-REACT/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/DELL/WEBSITE-REACT/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var apiUrl=\"/get-volunteer\";function Vol_Data(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),srno=_useState2[0],setSrno=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),volunteerData=_useState4[0],setVolunteerData=_useState4[1];var handleFormSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post(apiUrl,{srno:srno});case 4:response=_context.sent;setVolunteerData(response.data);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error('Error fetching volunteer data:',_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}));return function handleFormSubmit(_x){return _ref.apply(this,arguments);};}();var getTablesByEventCategory=function getTablesByEventCategory(events){// Group events by event category and calculate total hours allotted for each category\nvar eventsByCategory=events.reduce(function(acc,event){var category=event.eventcategory;if(!acc[category]){acc[category]={events:[],totalHours:0};}acc[category].events.push(event);var hoursAllotted=parseInt(event.hoursalloted,10);acc[category].totalHours+=isNaN(hoursAllotted)?0:hoursAllotted;return acc;},{});// Sort the categories alphabetically\nvar sortedCategories=Object.keys(eventsByCategory).sort();var grandTotal=sortedCategories.reduce(function(total,category){return total+eventsByCategory[category].totalHours;},0);return/*#__PURE__*/_jsxs(\"div\",{children:[sortedCategories.map(function(category){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"event-category\",children:category}),/*#__PURE__*/_jsxs(\"table\",{border:\"1\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Event Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Hours Allotted\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[eventsByCategory[category].events.map(function(event){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:event.eventname}),/*#__PURE__*/_jsx(\"td\",{children:event.date?new Date(event.date).toLocaleDateString():'No Date Available'}),/*#__PURE__*/_jsx(\"td\",{children:event.hoursalloted})]},event._id);}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"2\",children:\"Total:\"}),/*#__PURE__*/_jsx(\"td\",{children:eventsByCategory[category].totalHours})]})]})]})]},category);}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"table\",{border:\"1\",style:{marginTop:\"20px\"},children:/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Grand Total\"}),/*#__PURE__*/_jsx(\"td\",{children:grandTotal})]})})})})]});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{id:\"title\",children:\"Volunteer Information\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"srno\",id:\"srno\",children:\"Enter Serial Number:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"srno\",name:\"srno\",required:true,value:srno,onChange:function onChange(e){return setSrno(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",id:\"btn\",children:\"Submit\"})]}),volunteerData&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"table\",{border:\"1\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Serial Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"VEC Number\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:volunteerData.volunteerData.srno}),/*#__PURE__*/_jsx(\"td\",{children:volunteerData.volunteerData.name}),/*#__PURE__*/_jsx(\"td\",{children:volunteerData.volunteerData.vecno})]})})]}),volunteerData.volunteerData.eventsattained&&volunteerData.volunteerData.eventsattained.length>0&&/*#__PURE__*/_jsx(\"div\",{children:getTablesByEventCategory(volunteerData.volunteerData.eventsattained)})]})]});}export default Vol_Data;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","apiUrl","Vol_Data","_useState","_useState2","_slicedToArray","srno","setSrno","_useState3","_useState4","volunteerData","setVolunteerData","handleFormSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","response","wrap","_callee$","_context","prev","next","preventDefault","post","sent","data","t0","console","error","stop","_x","apply","arguments","getTablesByEventCategory","events","eventsByCategory","reduce","acc","event","category","eventcategory","totalHours","push","hoursAllotted","parseInt","hoursalloted","isNaN","sortedCategories","Object","keys","sort","grandTotal","total","children","map","className","border","eventname","date","Date","toLocaleDateString","_id","colSpan","style","marginTop","id","onSubmit","htmlFor","type","name","required","value","onChange","target","vecno","eventsattained","length"],"sources":["C:/Users/DELL/WEBSITE-REACT/src/components/pages/volunteer/Vol_Data.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst apiUrl = \"/get-volunteer\";\r\n\r\nfunction Vol_Data() {\r\n  const [srno, setSrno] = useState('');\r\n  const [volunteerData, setVolunteerData] = useState(null);\r\n\r\n  const handleFormSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await axios.post(apiUrl, { srno });\r\n      setVolunteerData(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching volunteer data:', error);\r\n    }\r\n  };\r\n\r\n  const getTablesByEventCategory = (events) => {\r\n    // Group events by event category and calculate total hours allotted for each category\r\n    const eventsByCategory = events.reduce((acc, event) => {\r\n      const category = event.eventcategory;\r\n      if (!acc[category]) {\r\n        acc[category] = { events: [], totalHours: 0 };\r\n      }\r\n      acc[category].events.push(event);\r\n      const hoursAllotted = parseInt(event.hoursalloted, 10);\r\n      acc[category].totalHours += isNaN(hoursAllotted) ? 0 : hoursAllotted;\r\n      return acc;\r\n    }, {});\r\n\r\n    // Sort the categories alphabetically\r\n    const sortedCategories = Object.keys(eventsByCategory).sort();\r\n\r\n    const grandTotal = sortedCategories.reduce((total, category) => {\r\n      return total + eventsByCategory[category].totalHours;\r\n    }, 0);\r\n\r\n    return (\r\n      <div>\r\n        {sortedCategories.map(category => (\r\n          <div key={category}>\r\n            <h2 className='event-category'>{category}</h2>\r\n            <table border=\"1\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Event Name</th>\r\n                  <th>Date</th>\r\n                  <th>Hours Allotted</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {eventsByCategory[category].events.map((event) => (\r\n                  <tr key={event._id}>\r\n                    <td>{event.eventname}</td>\r\n                    <td>{event.date ? new Date(event.date).toLocaleDateString() : 'No Date Available'}</td>\r\n                    <td>{event.hoursalloted}</td>\r\n                  </tr>\r\n                ))}\r\n                <tr>\r\n                  <td colSpan=\"2\">Total:</td>\r\n                  <td>{eventsByCategory[category].totalHours}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        ))}\r\n        <div>\r\n          <table border=\"1\" style={{ marginTop: \"20px\" }}>\r\n            <tbody>\r\n              <tr>\r\n                <th>Grand Total</th>\r\n                <td>{grandTotal}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1 id=\"title\">Volunteer Information</h1>\r\n      <form className=\"form\" onSubmit={handleFormSubmit}>\r\n        <label htmlFor=\"srno\" id='srno'>Enter Serial Number:</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"srno\"\r\n          name=\"srno\"\r\n          required\r\n          value={srno}\r\n          onChange={(e) => setSrno(e.target.value)}\r\n        />\r\n        <button type=\"submit\" id=\"btn\">Submit</button>\r\n      </form>\r\n\r\n      {volunteerData && (\r\n        <div>\r\n          <table border=\"1\">\r\n            <thead>\r\n              <tr>\r\n                <th>Serial Number</th>\r\n                <th>Name</th>\r\n                <th>VEC Number</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <td>{volunteerData.volunteerData.srno}</td>\r\n                <td>{volunteerData.volunteerData.name}</td>\r\n                <td>{volunteerData.volunteerData.vecno}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n\r\n          {volunteerData.volunteerData.eventsattained && volunteerData.volunteerData.eventsattained.length > 0 && (\r\n            <div>\r\n              {getTablesByEventCategory(volunteerData.volunteerData.eventsattained)}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Vol_Data;"],"mappings":"mWAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1B,GAAM,CAAAC,MAAM,CAAG,gBAAgB,CAE/B,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAClB,IAAAC,SAAA,CAAwBT,QAAQ,CAAC,EAAE,CAAC,CAAAU,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IACpB,IAAAI,UAAA,CAA0Cd,QAAQ,CAAC,IAAI,CAAC,CAAAe,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAjDE,aAAa,CAAAD,UAAA,IAAEE,gBAAgB,CAAAF,UAAA,IAEtC,GAAM,CAAAG,gBAAgB,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,CAAC,MAAAC,QAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAC/BN,CAAC,CAACO,cAAc,CAAC,CAAC,CAACH,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEM,CAAA5B,KAAK,CAAC8B,IAAI,CAACzB,MAAM,CAAE,CAAEK,IAAI,CAAJA,IAAK,CAAC,CAAC,QAA7Ca,QAAQ,CAAAG,QAAA,CAAAK,IAAA,CACdhB,gBAAgB,CAACQ,QAAQ,CAACS,IAAI,CAAC,CAACN,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAO,EAAA,CAAAP,QAAA,aAEhCQ,OAAO,CAACC,KAAK,CAAC,gCAAgC,CAAAT,QAAA,CAAAO,EAAO,CAAC,CAAC,yBAAAP,QAAA,CAAAU,IAAA,MAAAf,OAAA,gBAE1D,kBARK,CAAAL,gBAAgBA,CAAAqB,EAAA,SAAApB,IAAA,CAAAqB,KAAA,MAAAC,SAAA,OAQrB,CAED,GAAM,CAAAC,wBAAwB,CAAG,QAA3B,CAAAA,wBAAwBA,CAAIC,MAAM,CAAK,CAC3C;AACA,GAAM,CAAAC,gBAAgB,CAAGD,MAAM,CAACE,MAAM,CAAC,SAACC,GAAG,CAAEC,KAAK,CAAK,CACrD,GAAM,CAAAC,QAAQ,CAAGD,KAAK,CAACE,aAAa,CACpC,GAAI,CAACH,GAAG,CAACE,QAAQ,CAAC,CAAE,CAClBF,GAAG,CAACE,QAAQ,CAAC,CAAG,CAAEL,MAAM,CAAE,EAAE,CAAEO,UAAU,CAAE,CAAE,CAAC,CAC/C,CACAJ,GAAG,CAACE,QAAQ,CAAC,CAACL,MAAM,CAACQ,IAAI,CAACJ,KAAK,CAAC,CAChC,GAAM,CAAAK,aAAa,CAAGC,QAAQ,CAACN,KAAK,CAACO,YAAY,CAAE,EAAE,CAAC,CACtDR,GAAG,CAACE,QAAQ,CAAC,CAACE,UAAU,EAAIK,KAAK,CAACH,aAAa,CAAC,CAAG,CAAC,CAAGA,aAAa,CACpE,MAAO,CAAAN,GAAG,CACZ,CAAC,CAAE,CAAC,CAAC,CAAC,CAEN;AACA,GAAM,CAAAU,gBAAgB,CAAGC,MAAM,CAACC,IAAI,CAACd,gBAAgB,CAAC,CAACe,IAAI,CAAC,CAAC,CAE7D,GAAM,CAAAC,UAAU,CAAGJ,gBAAgB,CAACX,MAAM,CAAC,SAACgB,KAAK,CAAEb,QAAQ,CAAK,CAC9D,MAAO,CAAAa,KAAK,CAAGjB,gBAAgB,CAACI,QAAQ,CAAC,CAACE,UAAU,CACtD,CAAC,CAAE,CAAC,CAAC,CAEL,mBACE5C,KAAA,QAAAwD,QAAA,EACGN,gBAAgB,CAACO,GAAG,CAAC,SAAAf,QAAQ,qBAC5B1C,KAAA,QAAAwD,QAAA,eACE1D,IAAA,OAAI4D,SAAS,CAAC,gBAAgB,CAAAF,QAAA,CAAEd,QAAQ,CAAK,CAAC,cAC9C1C,KAAA,UAAO2D,MAAM,CAAC,GAAG,CAAAH,QAAA,eACf1D,IAAA,UAAA0D,QAAA,cACExD,KAAA,OAAAwD,QAAA,eACE1D,IAAA,OAAA0D,QAAA,CAAI,YAAU,CAAI,CAAC,cACnB1D,IAAA,OAAA0D,QAAA,CAAI,MAAI,CAAI,CAAC,cACb1D,IAAA,OAAA0D,QAAA,CAAI,gBAAc,CAAI,CAAC,EACrB,CAAC,CACA,CAAC,cACRxD,KAAA,UAAAwD,QAAA,EACGlB,gBAAgB,CAACI,QAAQ,CAAC,CAACL,MAAM,CAACoB,GAAG,CAAC,SAAChB,KAAK,qBAC3CzC,KAAA,OAAAwD,QAAA,eACE1D,IAAA,OAAA0D,QAAA,CAAKf,KAAK,CAACmB,SAAS,CAAK,CAAC,cAC1B9D,IAAA,OAAA0D,QAAA,CAAKf,KAAK,CAACoB,IAAI,CAAG,GAAI,CAAAC,IAAI,CAACrB,KAAK,CAACoB,IAAI,CAAC,CAACE,kBAAkB,CAAC,CAAC,CAAG,mBAAmB,CAAK,CAAC,cACvFjE,IAAA,OAAA0D,QAAA,CAAKf,KAAK,CAACO,YAAY,CAAK,CAAC,GAHtBP,KAAK,CAACuB,GAIX,CAAC,EACN,CAAC,cACFhE,KAAA,OAAAwD,QAAA,eACE1D,IAAA,OAAImE,OAAO,CAAC,GAAG,CAAAT,QAAA,CAAC,QAAM,CAAI,CAAC,cAC3B1D,IAAA,OAAA0D,QAAA,CAAKlB,gBAAgB,CAACI,QAAQ,CAAC,CAACE,UAAU,CAAK,CAAC,EAC9C,CAAC,EACA,CAAC,EACH,CAAC,GAvBAF,QAwBL,CAAC,EACP,CAAC,cACF5C,IAAA,QAAA0D,QAAA,cACE1D,IAAA,UAAO6D,MAAM,CAAC,GAAG,CAACO,KAAK,CAAE,CAAEC,SAAS,CAAE,MAAO,CAAE,CAAAX,QAAA,cAC7C1D,IAAA,UAAA0D,QAAA,cACExD,KAAA,OAAAwD,QAAA,eACE1D,IAAA,OAAA0D,QAAA,CAAI,aAAW,CAAI,CAAC,cACpB1D,IAAA,OAAA0D,QAAA,CAAKF,UAAU,CAAK,CAAC,EACnB,CAAC,CACA,CAAC,CACH,CAAC,CACL,CAAC,EACH,CAAC,CAEV,CAAC,CAED,mBACEtD,KAAA,QAAAwD,QAAA,eACE1D,IAAA,OAAIsE,EAAE,CAAC,OAAO,CAAAZ,QAAA,CAAC,uBAAqB,CAAI,CAAC,cACzCxD,KAAA,SAAM0D,SAAS,CAAC,MAAM,CAACW,QAAQ,CAAEzD,gBAAiB,CAAA4C,QAAA,eAChD1D,IAAA,UAAOwE,OAAO,CAAC,MAAM,CAACF,EAAE,CAAC,MAAM,CAAAZ,QAAA,CAAC,sBAAoB,CAAO,CAAC,cAC5D1D,IAAA,UACEyE,IAAI,CAAC,MAAM,CACXH,EAAE,CAAC,MAAM,CACTI,IAAI,CAAC,MAAM,CACXC,QAAQ,MACRC,KAAK,CAAEpE,IAAK,CACZqE,QAAQ,CAAE,SAAAA,SAACzD,CAAC,QAAK,CAAAX,OAAO,CAACW,CAAC,CAAC0D,MAAM,CAACF,KAAK,CAAC,EAAC,CAC1C,CAAC,cACF5E,IAAA,WAAQyE,IAAI,CAAC,QAAQ,CAACH,EAAE,CAAC,KAAK,CAAAZ,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC1C,CAAC,CAEN9C,aAAa,eACZV,KAAA,QAAAwD,QAAA,eACExD,KAAA,UAAO2D,MAAM,CAAC,GAAG,CAAAH,QAAA,eACf1D,IAAA,UAAA0D,QAAA,cACExD,KAAA,OAAAwD,QAAA,eACE1D,IAAA,OAAA0D,QAAA,CAAI,eAAa,CAAI,CAAC,cACtB1D,IAAA,OAAA0D,QAAA,CAAI,MAAI,CAAI,CAAC,cACb1D,IAAA,OAAA0D,QAAA,CAAI,YAAU,CAAI,CAAC,EACjB,CAAC,CACA,CAAC,cACR1D,IAAA,UAAA0D,QAAA,cACExD,KAAA,OAAAwD,QAAA,eACE1D,IAAA,OAAA0D,QAAA,CAAK9C,aAAa,CAACA,aAAa,CAACJ,IAAI,CAAK,CAAC,cAC3CR,IAAA,OAAA0D,QAAA,CAAK9C,aAAa,CAACA,aAAa,CAAC8D,IAAI,CAAK,CAAC,cAC3C1E,IAAA,OAAA0D,QAAA,CAAK9C,aAAa,CAACA,aAAa,CAACmE,KAAK,CAAK,CAAC,EAC1C,CAAC,CACA,CAAC,EACH,CAAC,CAEPnE,aAAa,CAACA,aAAa,CAACoE,cAAc,EAAIpE,aAAa,CAACA,aAAa,CAACoE,cAAc,CAACC,MAAM,CAAG,CAAC,eAClGjF,IAAA,QAAA0D,QAAA,CACGpB,wBAAwB,CAAC1B,aAAa,CAACA,aAAa,CAACoE,cAAc,CAAC,CAClE,CACN,EACE,CACN,EACE,CAAC,CAEV,CAEA,cAAe,CAAA5E,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}